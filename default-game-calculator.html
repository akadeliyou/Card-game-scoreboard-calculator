<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1.0, user-scalable=no">
  <title>Standaard Scoreboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1f2937;
    }

    /* Tabel styling */
    table {
      border-collapse: separate;
      border-spacing: 0;
      table-layout: fixed;
      width: 100%;
      max-width: 900px;
    }
    th, td {
      border: 1px solid #e5e7eb;
      padding: .5rem;
      vertical-align: top;
      position: relative;
    }
    th {
      background-color: #1f2937;
      color: #fff;
      font-weight: 700;
    }
    tr:nth-child(even) {
      background-color: #f9fafb;
    }
    tr:hover {
      background-color: #e5e7eb;
    }
    td input {
      font-size: .75rem;
      text-align: center;
    }
    .score-input-container {
      padding: .5rem;
    }
    .team-a-header {
      background-color: #2563eb;
    }
    .team-b-header {
      background-color: #1d4ed8;
    }
    .team-a-total-cell {
      background-color: #93c5fd;
    }
    .team-b-total-cell {
      background-color: #60a5fa;
    }

    /* Nieuwe CSS voor de rotatie-animatie */
    #rotation-icon-svg {
        width: 120px;
        height: 120px;
        margin-bottom: 2rem;
    }
    #phone-vertical {
        transform-origin: 50% 50%;
        animation: rotate-phone 2s infinite;
    }
    #rotation-arrow {
        transform-origin: 50% 50%;
        animation: rotate-arrow 2s infinite;
    }
    @keyframes rotate-phone {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-90deg); }
    }
    @keyframes rotate-arrow {
        0%, 100% { transform: rotate(0deg); opacity: 0; }
        15%, 85% { opacity: 1; }
        50% { transform: rotate(90deg); }
    }
  </style>
</head>
<body class="flex flex-col items-center min-h-screen p-2">


  <div id="main-content" class="w-full flex flex-col items-center min-h-screen p-2">
    <!-- Header en beschrijving -->
    <div class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
      <div class="flex justify-between items-center">
        <a href="./index.html" class="bg-gray-200 text-gray-700 font-bold py-1 px-2 rounded-lg text-xs hover:bg-gray-300">
          ‚Üê Terug naar menu
        </a>
        <h1 class="text-2xl sm:text-4xl font-bold text-center text-gray-800 mb-1 flex-grow">Standaard Scoreboard</h1>
        <div class="w-20"></div> <!-- Placeholder om de titel te centreren -->
      </div>
      <p class="text-center text-gray-600 text-sm sm:text-base mb-2">
        Houd de score bij voor spelers of teams.
      </p>
    </div>

    <!-- Spelinstellingen -->
    <div class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Spelinstellingen</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Speler namen (min. 2, max. 4):</label>
          <div class="mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2">
            <input type="text" id="player-name-1" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 1">
            <input type="text" id="player-name-2" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 2">
            <input type="text" id="player-name-3" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 3">
            <input type="text" id="player-name-4" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 4">
          </div>
        </div>
        <div>
          <div id="team-mode-container" class="mt-3 hidden">
            <div class="flex items-center">
              <input id="team-mode-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
              <label for="team-mode-checkbox" class="ml-2 block text-sm font-medium text-gray-700">Schakel teammodus in (2 tegen 2)</label>
            </div>
            <p class="text-xs text-gray-500 mt-1">Team A: Speler 1 & 2 | Team B: Speler 3 & 4</p>
          </div>
        </div>
      </div>
      <div id="player-count-error" class="mt-4 p-3 bg-red-100 text-red-700 font-bold rounded-lg hidden">Het spel kan niet worden gestart met 1 speler. Zoek vrienden!</div>
      <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-4">
        <button id="start-game-btn" class="w-full py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Start Spel</button>
        <button id="update-game-btn" class="w-full sm:w-1/2 py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm hidden">Instellingen toepassen</button>
        <button id="reset-game-btn" class="w-full sm:w-1/2 py-2.5 px-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm hidden">Reset Spel</button>
      </div>
    </div>

    <!-- Scorebord -->
    <div id="score-container" class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4 hidden">
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Scorebord</h2>
      <div class="overflow-x-auto">
        <table id="score-table" class="w-full text-left rounded-2xl shadow-md overflow-hidden">
          <thead></thead>
          <tbody></tbody>
          <tfoot></tfoot>
        </table>
      </div>
      <button id="add-round-btn" class="mt-4 w-full py-2.5 px-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Ronde toevoegen</button>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="w-full text-center py-4 text-gray-400 text-sm">Made by AE</footer>

  <script>
    // Wacht tot de DOM volledig geladen is
    document.addEventListener('DOMContentLoaded', () => {

      // Haal alle benodigde DOM-elementen op
      const startGameBtn = document.getElementById('start-game-btn');
      const updateGameBtn = document.getElementById('update-game-btn');
      const scoreContainer = document.getElementById('score-container');
      const scoreTableHead = document.querySelector('#score-table thead');
      const scoreTableBody = document.querySelector('#score-table tbody');
      const scoreTableFoot = document.querySelector('#score-table tfoot');
      const addRoundBtn = document.getElementById('add-round-btn');
      const resetGameBtn = document.getElementById('reset-game-btn');
      const playerCountError = document.getElementById('player-count-error');
      const teamModeContainer = document.getElementById('team-mode-container');
      const teamModeCheckbox = document.getElementById('team-mode-checkbox');
      const playerNameInputs = Array.from({ length: 4 }, (_, i) => document.getElementById(`player-name-${i + 1}`));

      // Globale variabelen voor de spelstaat
      let playerNames = [];
      let playerScores = [];
      let numRounds = 0;
      let isTeamMode = false;

      // Functie om de teammodus UI te tonen/verbergen
      const updateTeamModeUI = () => {
        const playerCount = playerNameInputs.map(input => input.value.trim()).filter(name => name !== '').length;
        if (playerCount === 4) {
          teamModeContainer.classList.remove('hidden');
        } else {
          teamModeContainer.classList.add('hidden');
          teamModeCheckbox.checked = false;
        }
      };
      
      // Voeg een event listener toe voor de invoervelden van de spelernamen
      playerNameInputs.forEach(input => {
        input.addEventListener('input', updateTeamModeUI);
      });

      // Functie voor het starten van het spel
      startGameBtn.addEventListener('click', () => {
        const activePlayerNames = playerNameInputs.map(input => input.value.trim()).filter(name => name !== '');
        if (activePlayerNames.length < 2) {
          playerCountError.classList.remove('hidden');
          return;
        }
        
        playerCountError.classList.add('hidden');
        scoreContainer.classList.remove('hidden');
        startGameBtn.classList.add('hidden');
        updateGameBtn.classList.remove('hidden');
        resetGameBtn.classList.remove('hidden');
        updateGameBtn.classList.remove('w-full');
        updateGameBtn.classList.add('sm:w-1/2');

        playerNames = activePlayerNames;
        numRounds = 1; // Start altijd met 1 ronde
        playerScores = playerNames.map(() => Array(numRounds).fill(0));
        isTeamMode = playerNames.length === 4 && teamModeCheckbox.checked;

        renderTable();
        scoreContainer.scrollIntoView({ behavior: 'smooth' });
      });

      // Functie voor het updaten van de spelinstellingen
      updateGameBtn.addEventListener('click', () => {
        const activePlayerNames = playerNameInputs.map(input => input.value.trim()).filter(name => name !== '');
        if (activePlayerNames.length < 2) {
          playerCountError.classList.remove('hidden');
          return;
        }
        
        playerCountError.classList.add('hidden');
        const oldPlayerCount = playerNames.length;
        const newPlayerCount = activePlayerNames.length;

        // Pas de scores aan als het aantal spelers is veranderd
        if (newPlayerCount !== oldPlayerCount) {
          const newPlayerScores = Array(newPlayerCount).fill(null).map((_, playerIndex) => {
            const oldScores = playerScores[playerIndex] || [];
            return oldScores.slice(0, numRounds).concat(Array(Math.max(0, numRounds - oldScores.length)).fill(0));
          });
          playerScores = newPlayerScores;
        }

        playerNames = activePlayerNames;
        isTeamMode = playerNames.length === 4 && teamModeCheckbox.checked;
        renderTable();
      });

      // Functie om een ronde toe te voegen
      addRoundBtn.addEventListener('click', () => {
        numRounds++;
        playerScores.forEach(scores => scores.push(0));
        renderTable();
      });

      // Functie om het spel te resetten
      resetGameBtn.addEventListener('click', () => {
        playerNames = [];
        playerScores = [];
        numRounds = 0;
        isTeamMode = false;

        playerNameInputs.forEach(input => input.value = '');
        teamModeCheckbox.checked = false;
        teamModeContainer.classList.add('hidden');
        scoreContainer.classList.add('hidden');
        startGameBtn.classList.remove('hidden');
        updateGameBtn.classList.add('hidden');
        resetGameBtn.classList.add('hidden');
        startGameBtn.classList.remove('sm:w-1/2');
        startGameBtn.classList.add('w-full');
        scoreTableHead.innerHTML = '';
        scoreTableBody.innerHTML = '';
        scoreTableFoot.innerHTML = '';
      });
      
      // Functie om de inhoud van een input-veld te selecteren
      window.selectOnFocus = (element) => {
        element.select();
      };

      // Functie om de scoretabel te renderen
      const renderTable = () => {
        // Render de tabelkop
        let tableHeadHtml = '<tr><th class="rounded-tl-2xl">Ronde</th>';
        playerNames.forEach((name, playerIndex) => {
          const isLastPlayer = playerIndex === playerNames.length - 1;
          const cornerClass = isLastPlayer ? 'rounded-tr-2xl' : '';
          const teamHeaderClass = isTeamMode && playerIndex >= 2 ? 'team-b-header' : 'team-a-header';
          tableHeadHtml += `<th class="text-white text-sm ${cornerClass} ${teamHeaderClass}">${name}</th>`;
        });
        tableHeadHtml += '</tr>';
        scoreTableHead.innerHTML = tableHeadHtml;

        // Render de tabelrijen voor elke ronde
        let tableBodyHtml = '';
        for (let roundIndex = 0; roundIndex < numRounds; roundIndex++) {
          tableBodyHtml += `<tr><td class="font-bold text-sm">Ronde ${roundIndex + 1}</td>`;
          
          playerNames.forEach((_, playerIndex) => {
            const score = playerScores[playerIndex][roundIndex];
            tableBodyHtml += `<td>`;
            tableBodyHtml += `<div class="score-input-container">`;
            tableBodyHtml += `<input type="number" id="score-${playerIndex}-${roundIndex}" oninput="window.updateScore(${roundIndex}, ${playerIndex}, this.value)" onfocus="window.selectOnFocus(this)" class="block w-full px-1.5 py-0.5 rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-xs" value="${score}" placeholder="0">`;
            tableBodyHtml += `</div></td>`;
          });
          tableBodyHtml += '</tr>';
        }
        scoreTableBody.innerHTML = tableBodyHtml;
        renderTotalScores();
      };
      
      // Functie om de score van een speler in een ronde bij te werken
      window.updateScore = (roundIndex, playerIndex, value) => {
        const score = parseInt(value, 10);
        playerScores[playerIndex][roundIndex] = isNaN(score) ? 0 : score;
        renderTotalScores();
      };

      // Functie om de totale scores te renderen
      const renderTotalScores = () => {
        let footerHtml = '';
        
        // Render de totale score rij voor elke speler
        let totalScoreRowHtml = '<tr><td class="font-bold text-sm">Totaal</td>';
        let playerTotals = playerNames.map((_, playerIndex) => playerScores[playerIndex].reduce((sum, score) => sum + (score || 0), 0));
        playerTotals.forEach((total, playerIndex) => {
          const cornerClass = playerIndex === playerTotals.length - 1 ? 'rounded-br-2xl' : '';
          const teamHeaderClass = isTeamMode && playerIndex >= 2 ? 'team-b-header' : 'team-a-header';
          totalScoreRowHtml += `<td class="text-lg font-bold text-center ${teamHeaderClass} text-white">${total}</td>`;
        });
        totalScoreRowHtml += '</tr>';
        footerHtml += totalScoreRowHtml;

        // Render de totale scores van de teams indien teammodus ingeschakeld is
        if (isTeamMode) {
          const teamATotal = playerTotals[0] + playerTotals[1];
          const teamBTotal = playerTotals[2] + playerTotals[3];
          let teamTotalRowHtml = `<tr><td class="font-bold text-sm">Team Totalen</td>`;
          teamTotalRowHtml += `<td colspan="2" class="text-lg font-bold text-center team-a-total-cell">${teamATotal}</td>`;
          teamTotalRowHtml += `<td colspan="2" class="text-lg font-bold text-center team-b-total-cell rounded-br-2xl">${teamBTotal}</td></tr>`;
          footerHtml += teamTotalRowHtml;
        }

        scoreTableFoot.innerHTML = footerHtml;
      };
      
      // Roep de functie aan om de UI bij te werken bij het laden van de pagina
      updateTeamModeUI();
    });
  </script>
</body>
</html>
