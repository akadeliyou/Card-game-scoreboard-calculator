<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=1.0, user-scalable=no">
  <title>Schoppenjagen (Batak) Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1f2937;
    }

    /* Stijlen voor de landschap/portretmodus */
    @media only screen and (orientation: portrait) {
      #main-content {
        display: none;
      }
      #rotation-message {
        display: flex;
      }
    }
    @media only screen and (orientation: landscape) {
      #main-content {
        display: block;
      }
      #rotation-message {
        display: none;
      }
    }

    /* Algemene styling voor de Batak-calculator */
    table {
      border-collapse: separate;
      border-spacing: 0;
      table-layout: fixed;
      width: 100%;
      max-width: 900px;
    }
    th, td {
      border: 1px solid #e5e7eb;
      padding: .5rem;
      vertical-align: middle;
      position: relative;
      text-align: center;
    }
    th {
      background-color: #1f2937;
      color: #fff;
      font-weight: 700;
    }
    tr:nth-child(even) {
      background-color: #f9fafb;
    }
    tr:hover {
      background-color: #e5e7eb;
    }
    td input {
      font-size: .75rem;
      text-align: center;
    }
    .input-container {
      padding: .25rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .tricks-input {
      width: 80%; /* Aangepaste breedte */
    }
    .action-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }
    
    /* BELANGRIJKE WIJZIGING: Stijl voor de inhoud van de eerste cel, niet de cel zelf */
    .round-dealer-content {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%; /* Zorg ervoor dat de div de volledige hoogte vult */
        padding: .5rem;
    }

    /* Score styling */
    .score-win {
      color: #16a34a;
      font-weight: bold;
    }
    .score-lose {
      color: #ef4444;
      font-weight: bold;
    }
    .score-zero {
      color: #6b7280;
    }
    
    /* CSS voor de rotatie-animatie */
    #rotation-icon-svg {
        width: 120px;
        height: 120px;
        margin-bottom: 2rem;
    }
    #phone-vertical {
        transform-origin: 50% 50%;
        animation: rotate-phone 2s infinite;
    }
    #rotation-arrow {
        transform-origin: 50% 50%;
        animation: rotate-arrow 2s infinite;
    }
    @keyframes rotate-phone {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-90deg); }
    }
    @keyframes rotate-arrow {
        0%, 100% { transform: rotate(0deg); opacity: 0; }
        15%, 85% { opacity: 1; }
        50% { transform: rotate(90deg); }
    }
    /* Nieuwe CSS voor de markering van het invoerveld voor slagen */
    .tricks-input-highlight {
        background-color: #fffbe3; /* Lichtoranje achtergrond */
        border: 2px solid #fbbf24; /* Oranje rand */
        box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); /* Oranje gloed */
    }
    /* Stijl voor het numerieke toetsenbord */
    .keyboard {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.25rem;
        padding-top: 0.5rem;
    }
    .keyboard button {
        padding: 0.5rem;
        background-color: #e5e7eb;
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: bold;
        transition: background-color 0.2s;
    }
    .keyboard button:hover {
        background-color: #d1d5db;
    }
  </style>
</head>
<body class="bg-gray-100 flex flex-col items-center min-h-screen p-2">

  <!-- Bericht voor portretmodus -->
  <div id="rotation-message" class="w-full h-full min-h-screen flex flex-col items-center justify-center text-center text-gray-100 absolute inset-0">
    <!-- Geanimeerde SVG van een draaiende telefoon -->
    <svg id="rotation-icon-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect id="phone-vertical" x="35" y="15" width="30" height="50" rx="5" stroke="#fff" stroke-width="2"/>
      <path id="rotation-arrow" d="M75 50C75 41.7157 68.2843 35 60 35M75 50L69 55M75 50L69 45M25 50C25 58.2843 31.7157 65 40 65M25 50L31 45M25 50L31 55" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-2">Draai je apparaat! </h2>
    <p class="text-base sm:text-lg text-gray-300">Deze website werkt alleen in landschapsmodus.</p>
  </div>

  <div id="main-content" class="w-full flex flex-col items-center min-h-screen p-2">
    <!-- Header en beschrijving -->
    <div class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
      <div class="flex justify-between items-center">
        <a href="./index.html" class="bg-gray-200 text-gray-700 font-bold py-1 px-2 rounded-lg text-xs hover:bg-gray-300">
          ‚Üê Terug naar menu
        </a>
        <h1 class="text-2xl sm:text-4xl font-bold text-center text-gray-800 mb-1 flex-grow">Schoppenjagen (Batak) Calculator</h1>
        <div class="w-20"></div> <!-- Placeholder om de titel te centreren -->
      </div>
      <p class="text-center text-gray-600 text-sm sm:text-base mb-2">
        Houd de score bij voor de Solo of Team Batak-variant.
      </p>
    </div>

    <!-- Spelinstellingen -->
    <div class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Spelinstellingen</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Spelmodus:</label>
          <select id="game-mode-select" class="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm">
            <option value="solo">Solo Batak</option>
            <option value="teams">Team Batak</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Aantal spelers:</label>
          <select id="player-count-select" class="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm">
            <option value="4">4 spelers</option>
            <option value="3">3 spelers</option>
          </select>
        </div>
        <div>
            <label for="min-bid-input" class="block text-sm font-medium text-gray-700">Minimale bod:</label>
            <input type="number" id="min-bid-input" class="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value="6">
        </div>
        <div>
            <label for="max-bid-input" class="block text-sm font-medium text-gray-700">Maximale bod:</label>
            <input type="number" id="max-bid-input" class="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value="13">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Speler namen:</label>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
        <div class="player-card bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm">
          <label class="block text-sm font-medium text-gray-700 mb-2">Speler 1:</label>
          <input type="text" id="player-name-1" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 1">
        </div>
        <div class="player-card bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm">
          <label class="block text-sm font-medium text-gray-700 mb-2">Speler 2:</label>
          <input type="text" id="player-name-2" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 2">
        </div>
        <div class="player-card bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm">
          <label class="block text-sm font-medium text-gray-700 mb-2">Speler 3:</label>
          <input type="text" id="player-name-3" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 3">
        </div>
        <div class="player-card bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm">
          <label class="block text-sm font-medium text-gray-700 mb-2">Speler 4:</label>
          <input type="text" id="player-name-4" class="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder="Speler 4">
        </div>
      </div>
        </div>
        <!-- Nieuwe instelling voor bonuspunten bij overbieden -->
        <div>
          <div class="flex items-center space-x-2">
            <input id="bonus-tricks-checkbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
            <label for="bonus-tricks-checkbox" class="block text-sm font-bold text-gray-700">Slagpunten gelijkhouden</label>
          </div>
          <p class="text-xs text-gray-500 mt-1">Als dit niet is aangevinkt, dan is het bod de maximale punten die je kunt krijgen, ook als je meer slagen pakt.</p>
        </div>
      </div>
      <div id="player-count-error" class="mt-4 p-3 bg-red-100 text-red-700 font-bold rounded-lg hidden">Vul de namen in van alle 4 spelers om te beginnen.</div>
      <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-4">
        <button id="start-game-btn" class="w-full py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Start Spel</button>
        <button id="update-game-btn" class="w-full sm:w-1/2 py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm hidden">Instellingen toepassen</button>
        <button id="reset-game-btn" class="w-full sm:w-1/2 py-2.5 px-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm hidden">Reset Spel</button>
      </div>
    </div>

    <!-- Scorebord -->
    <div id="score-container" class="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4 hidden">
      <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Scorebord</h2>
      <div id="validation-message-box" class="mt-2 p-3 bg-red-100 text-red-700 font-bold rounded-lg hidden"></div>
      <div class="overflow-x-auto">
        <table id="score-table" class="w-full text-left rounded-2xl shadow-md overflow-hidden">
          <thead></thead>
          <tbody></tbody>
          <tfoot></tfoot>
        </table>
      </div>
      <button id="add-round-btn" class="mt-4 w-full py-2.5 px-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Ronde toevoegen</button>
    </div>
  </div>

  <!-- Aangepaste bied-popup -->
  <div id="bid-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden bg-gray-900 bg-opacity-50">
    <div class="bg-white p-6 rounded-2xl shadow-lg max-w-sm w-full mx-4">
        <h3 class="text-xl font-bold text-gray-800 mb-2">Bieding invoeren</h3>
        <p class="text-sm text-gray-600 mb-4">
            Voer het bod in voor <span id="modal-player-name" class="font-bold text-gray-800"></span> voor ronde <span id="modal-round-number" class="font-bold text-gray-800"></span>.
        </p>
        <div class="mb-4">
            <label for="modal-bid-input" class="block text-sm font-medium text-gray-700 mb-1">Bod (0-13):</label>
            <input type="text" id="modal-bid-input" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm" min="0" max="13" placeholder="Bijv. 6" readonly>
        </div>
        <!-- Numeriek toetsenbord in de popup -->
        <div class="grid grid-cols-3 gap-2">
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('1')">1</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('2')">2</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('3')">3</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('4')">4</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('5')">5</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('6')">6</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('7')">7</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('8')">8</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('9')">9</button>
            <button class="col-span-1 bg-red-600 text-white font-bold rounded-lg p-4 text-2xl hover:bg-red-700" onclick="handleModalKeyboardInput('clear')">C</button>
            <button class="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onclick="handleModalKeyboardInput('0')">0</button>
            <button class="col-span-1 bg-green-600 text-white font-bold rounded-lg p-4 text-2xl hover:bg-green-700" onclick="submitBid()">‚úì</button>
        </div>
        <!-- Nieuwe validatie melding in de modal -->
        <div id="modal-validation-message" class="mt-2 p-2 bg-red-100 text-red-700 font-bold rounded-lg hidden text-sm"></div>
        <div class="flex justify-end space-x-2 mt-4">
            <button id="modal-cancel-btn" class="px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg shadow-sm hover:bg-gray-300 transition-colors text-sm" onclick="closeBidModal()">Annuleren</button>
        </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="w-full text-center py-4 text-gray-400 text-sm">Made by AE</footer>

  <script>
    // Globale variabele om de fout te voorkomen
    let focusedInput = null;

    // Wacht tot de DOM volledig geladen is
    document.addEventListener('DOMContentLoaded', () => {

      // Haal alle benodigde DOM-elementen op
      const startGameBtn = document.getElementById('start-game-btn');
      const updateGameBtn = document.getElementById('update-game-btn');
      const scoreContainer = document.getElementById('score-container');
      const scoreTableHead = document.querySelector('#score-table thead');
      const scoreTableBody = document.querySelector('#score-table tbody');
      const scoreTableFoot = document.querySelector('#score-table tfoot');
      const addRoundBtn = document.getElementById('add-round-btn');
      const resetGameBtn = document.getElementById('reset-game-btn');
      const playerCountError = document.getElementById('player-count-error');
      const playerNameInputs = Array.from({ length: 4 }, (_, i) => document.getElementById(`player-name-${i + 1}`));
      const gameModeSelect = document.getElementById('game-mode-select');
      const playerCountSelect = document.getElementById('player-count-select');
      const playerName4Input = document.getElementById('player-name-4');
      const validationMessageBox = document.getElementById('validation-message-box');
      const minBidInput = document.getElementById('min-bid-input');
      const maxBidInput = document.getElementById('max-bid-input');
      const bonusTricksCheckbox = document.getElementById('bonus-tricks-checkbox');
      const keyboardModal = document.getElementById('keyboard-modal');

      // Modal elementen
      const bidModal = document.getElementById('bid-modal');
      const modalPlayerName = document.getElementById('modal-player-name');
      const modalRoundNumber = document.getElementById('modal-round-number');
      const modalBidInput = document.getElementById('modal-bid-input');
      const modalValidationMessage = document.getElementById('modal-validation-message');
      const modalCancelBtn = document.getElementById('modal-cancel-btn');
      const modalSubmitBtn = document.getElementById('modal-submit-btn');

      // Globale variabelen voor de spelstaat
      let playerNames = [];
      let playerBids = [];
      let playerTricks = [];
      let playerScores = [];
      let numRounds = 0;
      let gameMode = 'solo';
      let playerCount = 4;
      let hasBonusTricks = false;

      // Event listener voor spelmodus en aantal spelers
      gameModeSelect.addEventListener('change', (e) => {
        gameMode = e.target.value;
        if (gameMode === 'teams') {
            playerCountSelect.value = '4';
            playerCountSelect.disabled = true;
            playerName4Input.classList.remove('hidden');
        } else {
            playerCountSelect.disabled = false;
        }
        updatePlayerNameInputs();
      });

      playerCountSelect.addEventListener('change', (e) => {
        playerCount = parseInt(e.target.value, 10);
        updatePlayerNameInputs();
        updateDefaultBidSettings();
      });

      minBidInput.addEventListener('input', (e) => {
          const minVal = parseInt(e.target.value, 10);
          const maxVal = parseInt(maxBidInput.value, 10);
          if (minVal > maxVal) {
              e.target.value = maxVal;
          }
      });

      maxBidInput.addEventListener('input', (e) => {
          const maxVal = parseInt(e.target.value, 10);
          const totalTricksInGame = playerCount === 3 ? 16 : 13;
          if (maxVal > totalTricksInGame) {
              e.target.value = totalTricksInGame;
              showValidationMessage(`Fout: Maximale bod kan niet hoger zijn dan ${totalTricksInGame}.`, true);
          }
      });
      
      // Nieuwe event listener voor de bonuspunten checkbox
      bonusTricksCheckbox.addEventListener('change', (e) => {
        hasBonusTricks = e.target.checked;
      });


      function updatePlayerNameInputs() {
        if (gameMode === 'solo') {
            const newPlayerCount = parseInt(playerCountSelect.value, 10);
            playerNameInputs.forEach((input, index) => {
                if (index < newPlayerCount) {
                    input.classList.remove('hidden');
                } else {
                    input.classList.add('hidden');
                    input.value = ''; // Clear value for hidden fields
                }
            });
            playerCount = newPlayerCount;
        } else if (gameMode === 'teams') {
             // Team modus heeft altijd 4 spelers
            playerNameInputs.forEach(input => input.classList.remove('hidden'));
            playerCount = 4;
        }
      }

      function updateDefaultBidSettings() {
          if (playerCount === 3) {
              maxBidInput.value = 16;
              maxBidInput.max = 16; 
              minBidInput.value = 6;
              minBidInput.min = 0;
          } else {
              maxBidInput.value = 13;
              maxBidInput.max = 13; 
              minBidInput.value = 6;
              minBidInput.min = 0;
          }
      }

      // Functie voor het starten van het spel
      startGameBtn.addEventListener('click', () => {
        const activePlayerNames = playerNameInputs.filter(input => !input.classList.contains('hidden')).map(input => input.value.trim()).filter(name => name !== '');
        
        if (activePlayerNames.length !== playerCount) {
          playerCountError.innerText = `Vul de namen in van alle ${playerCount} spelers om te beginnen.`;
          playerCountError.classList.remove('hidden');
          return;
        }
        
        playerCountError.classList.add('hidden');
        scoreContainer.classList.remove('hidden');
        startGameBtn.classList.add('hidden');
        updateGameBtn.classList.remove('hidden');
        resetGameBtn.classList.remove('hidden');
        updateGameBtn.classList.remove('w-full');
        updateGameBtn.classList.add('sm:w-1/2');

        playerNames = activePlayerNames;
        gameMode = gameModeSelect.value;
        playerCount = playerNames.length;
        numRounds = 1; // Start altijd met 1 ronde
        playerBids = playerNames.map(() => Array(numRounds).fill(null));
        playerTricks = playerNames.map(() => Array(numRounds).fill(null));
        playerScores = playerNames.map(() => Array(numRounds).fill(null));
        hasBonusTricks = bonusTricksCheckbox.checked;

        renderTable();
        scoreContainer.scrollIntoView({ behavior: 'smooth' });
      });

      // Functie voor het updaten van de spelinstellingen
      updateGameBtn.addEventListener('click', () => {
        const activePlayerNames = playerNameInputs.filter(input => !input.classList.contains('hidden')).map(input => input.value.trim()).filter(name => name !== '');
        if (activePlayerNames.length !== playerCount) {
          playerCountError.innerText = `Vul de namen in van alle ${playerCount} spelers om de instellingen toe te passen.`;
          playerCountError.classList.remove('hidden');
          return;
        }
        
        playerCountError.classList.add('hidden');
        playerNames = activePlayerNames;
        gameMode = gameModeSelect.value;
        playerCount = playerNames.length;
        hasBonusTricks = bonusTricksCheckbox.checked;
        renderTable();
      });

      // Functie om een ronde toe te voegen
      addRoundBtn.addEventListener('click', () => {
        const currentRoundIndex = numRounds - 1;
        const isCurrentRoundLocked = playerScores.every(scores => scores[currentRoundIndex] !== null);
        
        if (!isCurrentRoundLocked) {
            showValidationMessage("Fout: Bereken eerst de score van de huidige ronde voordat u een nieuwe ronde toevoegt.", true);
            return;
        }

        numRounds++;
        playerBids.forEach(bids => bids.push(null));
        playerTricks.forEach(tricks => tricks.push(null));
        playerScores.forEach(scores => scores.push(null));
        renderTable();
      });

      // Functie om het spel te resetten
      resetGameBtn.addEventListener('click', () => {
        playerNames = [];
        playerBids = [];
        playerTricks = [];
        playerScores = [];
        numRounds = 0;
        gameMode = 'solo';
        playerCount = 4;
        hasBonusTricks = false;

        playerNameInputs.forEach(input => input.value = '');
        gameModeSelect.value = 'solo';
        playerCountSelect.value = '4';
        playerCountSelect.disabled = false;
        bonusTricksCheckbox.checked = false;
        playerNameInputs.forEach(input => input.classList.remove('hidden'));
        scoreContainer.classList.add('hidden');
        startGameBtn.classList.remove('hidden');
        updateGameBtn.classList.add('hidden');
        resetGameBtn.classList.add('hidden');
        startGameBtn.classList.remove('sm:w-1/2');
        startGameBtn.classList.add('w-full');
        scoreTableHead.innerHTML = '';
        scoreTableBody.innerHTML = '';
        scoreTableFoot.innerHTML = '';
        updateDefaultBidSettings();
      });
      
      // Functie om de inhoud van een input-veld te selecteren
      window.selectOnFocus = (element) => {
        element.select();
      };

      // Toon een validatiebericht (gebruikt voor meldingen buiten de modal)
      function showValidationMessage(message, isError = true) {
          validationMessageBox.innerText = message;
          validationMessageBox.classList.remove('hidden');
          validationMessageBox.classList.add(isError ? 'bg-red-100' : 'bg-green-100', isError ? 'text-red-700' : 'text-green-700');
          validationMessageBox.classList.remove(isError ? 'bg-green-100' : 'bg-red-100', isError ? 'text-green-700' : 'text-red-700');
          setTimeout(() => {
              validationMessageBox.classList.add('hidden');
          }, 5000);
      }

      // Toon een validatiebericht in de modal
      function showModalValidationMessage(message) {
        modalValidationMessage.innerText = message;
        modalValidationMessage.classList.remove('hidden');
      }
      
      // Verberg de validatiebericht in de modal
      function hideModalValidationMessage() {
        modalValidationMessage.classList.add('hidden');
      }

      // Functie om de scoretabel te renderen
      function renderTable() {
        const totalTricksInGame = playerCount === 3 ? 16 : 13;
        const minBid = parseInt(minBidInput.value, 10);
        const maxBid = parseInt(maxBidInput.value, 10);

        if (gameMode === 'solo') {
            const displayPlayerOrder = Array.from({ length: playerCount }, (_, i) => i);
            const colWidth = 100 / (playerCount + 1);
            
            let tableHeadHtml = '<colgroup>';
            for (let i = 0; i < playerCount + 1; i++) {
                tableHeadHtml += `<col style="width:${colWidth}%">`;
            }
            tableHeadHtml += '</colgroup>';

            tableHeadHtml += '<tr><th class="rounded-tl-2xl">Ronde</th>';
            displayPlayerOrder.forEach((playerIndex, i) => {
                const isLastPlayer = i === displayPlayerOrder.length - 1;
                const cornerClass = isLastPlayer ? 'rounded-tr-2xl' : '';
                tableHeadHtml += `<th class="${cornerClass} text-sm">${playerNames[playerIndex]}</th>`;
            });
            tableHeadHtml += '</tr>';
            scoreTableHead.innerHTML = tableHeadHtml;

            let tableBodyHtml = '';
            for (let roundIndex = 0; roundIndex < numRounds; roundIndex++) {
                const dealerName = playerNames[roundIndex % playerCount];
                
                tableBodyHtml += `<tr><td class="font-bold text-sm">`;
                tableBodyHtml += `<div class="round-dealer-content">`;
                tableBodyHtml += `<span>Ronde ${roundIndex + 1}</span>`;
                tableBodyHtml += `<span class="text-xs font-normal text-gray-500 mt-1">Dealer: ${dealerName}</span>`;
                tableBodyHtml += `</div></td>`;

                const biddingPlayerIndexInRound = playerBids.findIndex(bids => bids[roundIndex] !== null);
                const isRoundLocked = playerScores.some(scores => scores[roundIndex] !== null);
                
                const isTricksInputActive = biddingPlayerIndexInRound !== -1 && !isRoundLocked;

                displayPlayerOrder.forEach(playerIndex => {
                    const bid = playerBids[playerIndex][roundIndex];
                    const tricks = playerTricks[playerIndex][roundIndex];
                    const score = playerScores[playerIndex][roundIndex];
                    const isBiddingPlayer = playerIndex === biddingPlayerIndexInRound;

                    tableBodyHtml += `<td>`;
                    tableBodyHtml += `<div class="action-container" id="cell-${playerIndex}-${roundIndex}">`;
                    
                    if (isRoundLocked) {
                        let scoreText = score;
                        let scoreClass = 'score-zero';
                        if (score > 0) {
                            scoreClass = 'score-win';
                            scoreText = `+${score}`;
                        } else if (score < 0) {
                            scoreClass = 'score-lose';
                        } else if (score === null) {
                            scoreText = '-';
                        }
                        // Toon 'Bod: Slagen:' alleen voor de biedende speler
                        if (isBiddingPlayer) {
                            tableBodyHtml += `<div class="text-lg font-bold ${scoreClass}">${scoreText}</div>`;
                            tableBodyHtml += `<div class="text-xs font-medium text-gray-500">Bod: ${bid}, Slagen: ${tricks}</div>`;
                        } else {
                            tableBodyHtml += `<div class="text-lg font-bold ${scoreClass}">${scoreText}</div>`;
                            tableBodyHtml += `<div class="text-xs font-medium text-gray-500">Slagen: ${tricks}</div>`;
                        }
                    } else if (biddingPlayerIndexInRound === -1) {
                        tableBodyHtml += `<button onclick="window.showBidModal(${playerIndex}, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button>`;
                    } else {
                        const tricksInputId = `tricks-${playerIndex}-${roundIndex}`;
                        const isTricksInputHighlighted = isTricksInputActive && playerTricks[playerIndex][roundIndex] === null;
                        
                        if (isBiddingPlayer) {
                            tableBodyHtml += `<div class="text-sm font-bold text-gray-700">Bod: ${bid}</div>`;
                        }
                        // Toon altijd de input voor slagen, ongeacht of de speler heeft geboden.
                        tableBodyHtml += `<div class="input-container space-x-1">`;
                        tableBodyHtml += `<input type="number" id="${tricksInputId}" onfocus="window.showKeyboardModal(this)" oninput="this.classList.remove('tricks-input-highlight')" class="block px-1.5 py-0.5 rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-xs tricks-input w-24 ${isTricksInputHighlighted ? 'tricks-input-highlight' : ''}" placeholder="Slag" min="0" max="${totalTricksInGame}">`;
                        tableBodyHtml += `</div>`;
                        if (isBiddingPlayer) {
                            tableBodyHtml += `<button onclick="window.handleCalculateScore(${biddingPlayerIndexInRound}, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bereken Score</button>`;
                        }
                    }
                    tableBodyHtml += `</div></td>`;
                });
                tableBodyHtml += '</tr>';
            }
            scoreTableBody.innerHTML = tableBodyHtml;

        } else if (gameMode === 'teams') {
            const playerDisplayOrder = [0, 2, 1, 3]; // Visuele volgorde in de tabel
            const colWidth = 100 / (playerCount + 1); // 1 voor Ronde, 4 voor spelers
            
            let tableHeadHtml = '<colgroup>';
            tableHeadHtml += `<col style="width:${colWidth}%">`; // Ronde
            tableHeadHtml += `<col style="width:${colWidth*2}%">`; // Team 1
            tableHeadHtml += `<col style="width:${colWidth*2}%">`; // Team 2
            tableHeadHtml += '</colgroup>';

            tableHeadHtml += '<tr><th class="rounded-tl-2xl text-sm">Ronde</th>';
            tableHeadHtml += `<th colspan="2" class="text-sm">Team 1</th>`;
            tableHeadHtml += `<th colspan="2" class="rounded-tr-2xl text-sm">Team 2</th>`;
            tableHeadHtml += '</tr>';
            tableHeadHtml += `<tr><th></th><th class="text-xs font-normal">${playerNames[0]}</th><th class="text-xs font-normal">${playerNames[2]}</th><th class="text-xs font-normal">${playerNames[1]}</th><th class="text-xs font-normal">${playerNames[3]}</th></tr>`;
            scoreTableHead.innerHTML = tableHeadHtml;

            let tableBodyHtml = '';
            for (let roundIndex = 0; roundIndex < numRounds; roundIndex++) {
                const dealerName = playerNames[roundIndex % playerCount];
                
                // BELANGRIJKE WIJZIGING: Gebruik een interne div voor Flexbox styling
                tableBodyHtml += `<tr><td class="font-bold text-sm">`;
                tableBodyHtml += `<div class="round-dealer-content">`;
                tableBodyHtml += `<span>Ronde ${roundIndex + 1}</span>`;
                tableBodyHtml += `<span class="text-xs font-normal text-gray-500 mt-1">Dealer: ${dealerName}</span>`;
                tableBodyHtml += `</div></td>`;

                const biddingPlayerIndexInRound = playerBids.findIndex(bids => bids[roundIndex] !== null);
                const isRoundLocked = playerScores.some(scores => scores[roundIndex] !== null);
                const isTricksInputActive = biddingPlayerIndexInRound !== -1 && !isRoundLocked;
                
                const biddingTeamPlayers = (biddingPlayerIndexInRound % 2) === 0 ? [0, 2] : [1, 3];
                const otherTeamPlayers = biddingTeamPlayers[0] === 0 ? [1, 3] : [0, 2];
                const biddingTeamTricks = playerTricks[biddingTeamPlayers[0]][roundIndex];
                const otherTeamTricks = (biddingTeamTricks !== null) ? totalTricksInGame - biddingTeamTricks : null;
                const biddingTeamBid = playerBids[biddingPlayerIndexInRound]?.[roundIndex];

                if (biddingPlayerIndexInRound === -1) {
                    // Geen bod ingevoerd, toon de biedknoppen
                    tableBodyHtml += `<td><button onclick="window.showBidModal(0, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button></td>`;
                    tableBodyHtml += `<td><button onclick="window.showBidModal(2, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button></td>`;
                    tableBodyHtml += `<td><button onclick="window.showBidModal(1, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button></td>`;
                    tableBodyHtml += `<td><button onclick="window.showBidModal(3, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button></td>`;
                } else {
                    const renderBiddingTeam = (teamPlayers, bid) => {
                        const biddingPlayerIndex = teamPlayers.find(p => p === biddingPlayerIndexInRound);
                        const otherPlayerIndex = teamPlayers.find(p => p !== biddingPlayerIndexInRound);
                        
                        let html = '';
                        // Eerste kolom voor de biedende speler
                        html += `<td>`;
                        html += `<div class="action-container">`;
                        if (isRoundLocked) {
                            let scoreText = playerScores[biddingPlayerIndex][roundIndex];
                            let scoreClass = 'score-zero';
                            if (scoreText > 0) {
                                scoreClass = 'score-win';
                                scoreText = `+${scoreText}`;
                            } else if (scoreText < 0) {
                                scoreClass = 'score-lose';
                            } else if (scoreText === null) {
                                scoreText = '-';
                            }
                            html += `<div class="text-lg font-bold ${scoreClass}">${scoreText}</div>`;
                            html += `<div class="text-xs font-medium text-gray-500">Bod: ${bid}, Slagen: ${playerTricks[biddingPlayerIndex][roundIndex]}</div>`;
                        } else {
                            // Biedende speler krijgt input
                            const isTricksInputHighlighted = isTricksInputActive && playerTricks[biddingPlayerIndex][roundIndex] === null;
                            html += `<div class="text-sm font-bold text-gray-700">Bod: ${bid}</div>`;
                            html += `<div class="input-container"><input type="number" id="tricks-bidding-team-${roundIndex}" onfocus="window.showKeyboardModal(this)" oninput="this.classList.remove('tricks-input-highlight')" class="px-1.5 py-0.5 rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-xs w-24 ${isTricksInputHighlighted ? 'tricks-input-highlight' : ''}" placeholder="Slagen" min="0" max="13"></div>`;
                            html += `<button onclick="window.handleCalculateScore(${biddingPlayerIndexInRound}, ${roundIndex})" class="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bereken Score</button>`;
                        }
                        html += `</div></td>`;

                        // Tweede kolom voor de partner van de biedende speler
                        html += `<td>`;
                        html += `<div class="action-container">`;
                        // Toon altijd een streepje voor de partner
                        if (isRoundLocked) {
                             html += `<div class="text-lg font-bold text-gray-400">-</div>`;
                             html += `<div class="text-xs font-medium text-gray-500">-</div>`;
                        } else {
                            html += `<div class="text-sm font-bold text-gray-700">-</div>`;
                        }
                        html += `</div></td>`;
                        return html;
                    };

                    const renderOtherTeam = (teamPlayers, tricks, isLocked) => {
                        let html = `<td colspan="2">`;
                        html += `<div class="action-container">`;
                        if (isLocked) {
                            const scoreText = tricks !== null ? (tricks > 0 ? `+${tricks}` : '0') : '-';
                            const scoreClass = tricks > 0 ? 'score-win' : 'score-zero';
                            html += `<div class="text-lg font-bold ${scoreClass}">${scoreText}</div>`;
                            html += `<div class="text-xs font-medium text-gray-500">Slagen: ${tricks}</div>`;
                        } else {
                            html += `<div class="text-sm font-bold text-gray-700">Slagen:</div><div class="input-container"><span class="text-sm text-gray-500 font-medium">${tricks !== null ? tricks : 'Resterend'}</span></div>`;
                        }
                        html += `</div></td>`;
                        return html;
                    };


                    if (biddingTeamPlayers[0] === 0) { // Team 1 heeft geboden
                        tableBodyHtml += renderBiddingTeam(biddingTeamPlayers, biddingTeamBid);
                        tableBodyHtml += renderOtherTeam(otherTeamPlayers, otherTeamTricks, isRoundLocked);
                    } else { // Team 2 heeft geboden
                        tableBodyHtml += renderOtherTeam(otherTeamPlayers, otherTeamTricks, isRoundLocked);
                        tableBodyHtml += renderBiddingTeam(biddingTeamPlayers, biddingTeamBid);
                    }
                }
                tableBodyHtml += '</tr>';
            }
            scoreTableBody.innerHTML = tableBodyHtml;
        }

        renderTotalScores();
      }

      function renderTotalScores() {
        let footerHtml = '';
        
        if (gameMode === 'solo') {
            const colWidth = 100 / (playerCount + 1);

            let colgroupHtml = '<colgroup>';
            for (let i = 0; i < playerCount + 1; i++) {
                colgroupHtml += `<col style="width:${colWidth}%">`;
            }
            colgroupHtml += '</colgroup>';

            let totalScoreRowHtml = '<tr><td class="font-bold text-sm">Totaal</td>';
            let playerTotals = playerNames.map((_, playerIndex) => playerScores[playerIndex].reduce((sum, score) => sum + (score || 0), 0));
            playerTotals.forEach((total, playerIndex) => {
              const cornerClass = playerIndex === playerTotals.length - 1 ? 'rounded-br-2xl' : '';
              let scoreClass = 'score-zero';
              if (total > 0) {
                scoreClass = 'score-win';
              } else if (total < 0) {
                scoreClass = 'score-lose';
              }
              totalScoreRowHtml += `<td class="text-lg font-bold text-center ${cornerClass} ${scoreClass}">${total}</td>`;
            });
            totalScoreRowHtml += '</tr>';
            scoreTableFoot.innerHTML = colgroupHtml + totalScoreRowHtml;
        } else if (gameMode === 'teams') {
            // Bereken de totale score voor elk team door de score van √©√©n speler te sommeren,
            // aangezien beide spelers van een team dezelfde score krijgen per ronde.
            const totalScoreTeam1 = playerScores[0].reduce((sum, score) => sum + (score || 0), 0);
            const totalScoreTeam2 = playerScores[1].reduce((sum, score) => sum + (score || 0), 0);
            
            const getScoreClass = (total) => {
                if (total > 0) return 'score-win';
                if (total < 0) return 'score-lose';
                return 'score-zero';
            };

            footerHtml += `
              <tr class="bg-gray-200">
                <td class="font-bold text-sm rounded-bl-2xl">Totaal</td>
                <td colspan="2" class="text-lg font-bold text-center ${getScoreClass(totalScoreTeam1)}">${totalScoreTeam1}</td>
                <td colspan="2" class="text-lg font-bold text-center rounded-br-2xl ${getScoreClass(totalScoreTeam2)}">${totalScoreTeam2}</td>
              </tr>
            `;
            scoreTableFoot.innerHTML = footerHtml;
        }
      }
      
      window.handleModalKeyboardInput = (value) => {
        const inputElement = document.getElementById('modal-bid-input');
        if (!inputElement) return;
        
        if (value === 'clear') {
            inputElement.value = '';
        } else {
            // Voorkom dat er meer dan 2 cijfers worden ingevoerd
            if (inputElement.value.length < 2) {
                inputElement.value = (inputElement.value || '') + value;
            }
        }
      };
      
      // Functie om de aangepaste bied-modal te tonen
      window.showBidModal = (playerIndex, roundIndex) => {
        const minBid = parseInt(minBidInput.value, 10);
        const maxBid = parseInt(maxBidInput.value, 10);
        modalPlayerName.innerText = playerNames[playerIndex];
        modalRoundNumber.innerText = roundIndex + 1;
        modalBidInput.value = '';
        modalBidInput.min = minBid;
        modalBidInput.max = maxBid;
        modalBidInput.placeholder = `Bijv. ${Math.floor((minBid + maxBid) / 2)}`;
        document.querySelector('#modal-bid-input').max = maxBid;
        document.querySelector('#modal-bid-input').min = minBid;
        document.querySelector('#bid-modal label').innerText = `Bod (${minBid}-${maxBid}):`;
        hideModalValidationMessage();
        bidModal.dataset.playerIndex = playerIndex;
        bidModal.dataset.roundIndex = roundIndex;
        bidModal.classList.remove('hidden');
        modalBidInput.focus();
      };

      // Functie om de aangepaste bied-modal te sluiten
      function closeBidModal() {
        bidModal.classList.add('hidden');
      }

      // Functie voor het afhandelen van de bieding via de modal
      function submitBid() {
        const bid = modalBidInput.value.trim();
        const playerIndex = parseInt(bidModal.dataset.playerIndex, 10);
        const roundIndex = parseInt(bidModal.dataset.roundIndex, 10);
        const minBid = parseInt(minBidInput.value, 10);
        const maxBid = parseInt(maxBidInput.value, 10);
        
        if (bid === '' || isNaN(bid)) {
          showModalValidationMessage("Fout: Ongeldige bieding. Vul een getal in.");
          return;
        }

        const bidValue = parseInt(bid, 10);
        if (bidValue < minBid || bidValue > maxBid) {
            showModalValidationMessage(`Fout: Het bod moet tussen ${minBid} en ${maxBid} liggen.`);
            return;
        }
        
        playerBids[playerIndex][roundIndex] = bidValue;
        renderTable();
        closeBidModal();
        showValidationMessage(`Bod van ${playerNames[playerIndex]} is vastgelegd.`, false);
      }

      modalCancelBtn.addEventListener('click', closeBidModal);
      modalSubmitBtn.addEventListener('click', submitBid);

      // Functie om de scores te berekenen en vast te leggen na een klik op 'Bereken Score'
      window.handleCalculateScore = (biddingPlayerIndex, roundIndex) => {
        const totalTricksInGame = playerCount === 3 ? 16 : 13;
        
        if (gameMode === 'teams') {
            const biddingTeamPlayers = (biddingPlayerIndex % 2) === 0 ? [0, 2] : [1, 3];
            const otherTeamPlayers = biddingTeamPlayers[0] === 0 ? [1, 3] : [0, 2];

            const biddingTeamTricksInput = document.getElementById(`tricks-bidding-team-${roundIndex}`);
            
            const biddingTeamTricks = biddingTeamTricksInput.value.trim() !== '' ? parseInt(biddingTeamTricksInput.value, 10) : null;
            
            if (biddingTeamTricks === null || isNaN(biddingTeamTricks) || biddingTeamTricks < 0 || biddingTeamTricks > totalTricksInGame) {
                showValidationMessage(`Fout: Vul het aantal slagen in voor het biedende team (0-${totalTricksInGame}).`, true);
                return;
            }
            const otherTeamTricks = totalTricksInGame - biddingTeamTricks;

            const bid = playerBids[biddingPlayerIndex][roundIndex];
            
            let biddingTeamScore;
            if (hasBonusTricks) {
              biddingTeamScore = biddingTeamTricks >= bid ? biddingTeamTricks : -bid;
            } else {
              biddingTeamScore = biddingTeamTricks >= bid ? bid : -bid;
            }


            // Update de scores en tricks voor het biedende team
            playerScores[biddingTeamPlayers[0]][roundIndex] = biddingTeamScore;
            playerScores[biddingTeamPlayers[1]][roundIndex] = biddingTeamScore;
            playerTricks[biddingTeamPlayers[0]][roundIndex] = biddingTeamTricks;
            playerTricks[biddingTeamPlayers[1]][roundIndex] = biddingTeamTricks;

            // De score van het niet-biedende team is gelijk aan hun aantal slagen
            playerScores[otherTeamPlayers[0]][roundIndex] = otherTeamTricks;
            playerScores[otherTeamPlayers[1]][roundIndex] = otherTeamTricks;
            playerTricks[otherTeamPlayers[0]][roundIndex] = otherTeamTricks;
            playerTricks[otherTeamPlayers[1]][roundIndex] = otherTeamTricks;

        } else { // Solo mode
            let currentRoundTricks = playerNames.map((_, pIndex) => {
              const tricksInput = document.getElementById(`tricks-${pIndex}-${roundIndex}`);
              return tricksInput.value.trim() !== '' ? parseInt(tricksInput.value, 10) : null;
            });

            if (currentRoundTricks.some(t => t === null || t < 0 || t > totalTricksInGame)) {
              showValidationMessage(`Fout: Vul het aantal slagen in voor alle spelers (0-${totalTricksInGame}).`, true);
              return;
            }

            const totalTricks = currentRoundTricks.reduce((sum, t) => sum + (t || 0), 0);
            if (totalTricks !== totalTricksInGame) {
                showValidationMessage(`Fout: Het totaal aantal slagen moet ${totalTricksInGame} zijn.`, true);
                return;
            }
            
            const bid = playerBids[biddingPlayerIndex][roundIndex];
            
            playerNames.forEach((_, playerIndex) => {
              if (playerIndex === biddingPlayerIndex) {
                let score;
                if (hasBonusTricks) {
                  score = currentRoundTricks[playerIndex] >= bid ? currentRoundTricks[playerIndex] : -bid;
                } else {
                  score = currentRoundTricks[playerIndex] >= bid ? bid : -bid;
                }
                playerScores[playerIndex][roundIndex] = score;
              } else {
                playerScores[playerIndex][roundIndex] = currentRoundTricks[playerIndex];
              }
              playerTricks[playerIndex][roundIndex] = currentRoundTricks[playerIndex];
            });
        }
        
        renderTable();
        showValidationMessage(`Ronde ${roundIndex + 1} is vastgelegd!`, false);
      };

      // Functie om de totale scores te renderen
      function renderTotalScores() {
        let footerHtml = '';
        
        if (gameMode === 'solo') {
            const colWidth = 100 / (playerCount + 1);

            let colgroupHtml = '<colgroup>';
            for (let i = 0; i < playerCount + 1; i++) {
                colgroupHtml += `<col style="width:${colWidth}%">`;
            }
            colgroupHtml += '</colgroup>';

            let totalScoreRowHtml = '<tr><td class="font-bold text-sm">Totaal</td>';
            let playerTotals = playerNames.map((_, playerIndex) => playerScores[playerIndex].reduce((sum, score) => sum + (score || 0), 0));
            playerTotals.forEach((total, playerIndex) => {
              const cornerClass = playerIndex === playerTotals.length - 1 ? 'rounded-br-2xl' : '';
              let scoreClass = 'score-zero';
              if (total > 0) {
                scoreClass = 'score-win';
              } else if (total < 0) {
                scoreClass = 'score-lose';
              }
              totalScoreRowHtml += `<td class="text-lg font-bold text-center ${cornerClass} ${scoreClass}">${total}</td>`;
            });
            totalScoreRowHtml += '</tr>';
            scoreTableFoot.innerHTML = colgroupHtml + totalScoreRowHtml;
        } else if (gameMode === 'teams') {
            // Bereken de totale score voor elk team door de score van √©√©n speler te sommeren,
            // aangezien beide spelers van een team dezelfde score krijgen per ronde.
            const totalScoreTeam1 = playerScores[0].reduce((sum, score) => sum + (score || 0), 0);
            const totalScoreTeam2 = playerScores[1].reduce((sum, score) => sum + (score || 0), 0);
            
            const getScoreClass = (total) => {
                if (total > 0) return 'score-win';
                if (total < 0) return 'score-lose';
                return 'score-zero';
            };

            footerHtml += `
              <tr class="bg-gray-200">
                <td class="font-bold text-sm rounded-bl-2xl">Totaal</td>
                <td colspan="2" class="text-lg font-bold text-center ${getScoreClass(totalScoreTeam1)}">${totalScoreTeam1}</td>
                <td colspan="2" class="text-lg font-bold text-center rounded-br-2xl ${getScoreClass(totalScoreTeam2)}">${totalScoreTeam2}</td>
              </tr>
            `;
            scoreTableFoot.innerHTML = footerHtml;
        }
      }
      
      updatePlayerNameInputs();
      updateDefaultBidSettings();
    });
  </script>

  <script data-goatcounter="https://cardgamecounter.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
