<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.7, user-scalable=no">
  <title>Schoppenjagen (Batak) Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1f2937;
    }

    /* Algemene styling voor de Batak-calculator */
    table {
      border-collapse: separate;
      border-spacing: 0;
      table-layout: fixed;
      width: 100%;
      max-width: 900px;
    }
    th, td {
      border: 1px solid #e5e7eb;
      padding: .5rem;
      vertical-align: middle;
      position: relative;
      text-align: center;
    }
    th {
      background-color: #1f2937;
      color: #fff;
      font-weight: 700;
    }
    tr:nth-child(even) {
      background-color: #f9fafb;
    }
    tr:hover {
      background-color: #e5e7eb;
    }
    td input {
      font-size: .75rem;
      text-align: center;
    }
    .input-container {
      padding: .25rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .tricks-input {
      width: 80%; /* Aangepaste breedte */
    }
    .action-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }
    
    /* BELANGRIJKE WIJZIGING: Stijl voor de inhoud van de eerste cel, niet de cel zelf */
    .round-dealer-content {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%; /* Zorg ervoor dat de div de volledige hoogte vult */
        padding: .5rem;
    }

    /* Score styling */
    .score-win {
      color: #16a34a;
      font-weight: bold;
    }
    .score-lose {
      color: #ef4444;
      font-weight: bold;
    }
    .score-zero {
      color: #6b7280;
    }
    
    /* CSS voor de rotatie-animatie */
    #rotation-icon-svg {
        width: 120px;
        height: 120px;
        margin-bottom: 2rem;
    }
    #phone-vertical {
        transform-origin: 50% 50%;
        animation: rotate-phone 2s infinite;
    }
    #rotation-arrow {
        transform-origin: 50% 50%;
        animation: rotate-arrow 2s infinite;
    }
    @keyframes rotate-phone {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-90deg); }
    }
    @keyframes rotate-arrow {
        0%, 100% { transform: rotate(0deg); opacity: 0; }
        15%, 85% { opacity: 1; }
        50% { transform: rotate(90deg); }
    }
    /* Nieuwe CSS voor de markering van het invoerveld voor slagen */
    .tricks-input-highlight {
        background-color: #fffbe3; /* Lichtoranje achtergrond */
        border: 2px solid #fbbf24; /* Oranje rand */
        box-shadow: 0 0 10px rgba(251, 191, 36, 0.5); /* Oranje gloed */
    }
    /* Stijl voor het numerieke toetsenbord */
    .keyboard {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.25rem;
        padding-top: 0.5rem;
    }
    .keyboard button {
        padding: 0.5rem;
        background-color: #e5e7eb;
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: bold;
        transition: background-color 0.2s;
    }
    .keyboard button:hover {
        background-color: #d1d5db;
    }
    
    /* Popup styling */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
    .modal-content {
      background-color: white;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 90%;
      width: 400px;
    }
  </style>
</head>
<body class="bg-gray-100 flex flex-col items-center min-h-screen p-2">
  <div id="root"></div>

  {/* Het script tag met type="text/babel" vertelt Babel dat de JSX-code getranspileerd moet worden */}
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Hoofd-App component voor de Batak-calculator
    function App() {
      // State variabelen om de spelgegevens en UI te beheren
      const [playerNames, setPlayerNames] = useState(['', '', '', '']);
      const [isGameStarted, setIsGameStarted] = useState(false);
      const [gameMode, setGameMode] = useState('solo');
      const [playerCount, setPlayerCount] = useState(4);
      const [minBid, setMinBid] = useState(6);
      const [maxBid, setMaxBid] = useState(13);
      const [hasBonusTricks, setHasBonusTricks] = useState(false);
      const [playerCountError, setPlayerCountError] = useState(false);
      const [bids, setBids] = useState([]);
      const [tricks, setTricks] = useState([]);
      const [scores, setScores] = useState([]);
      const [numRounds, setNumRounds] = useState(0);
      const [showBidModal, setShowBidModal] = useState(false);
      const [modalData, setModalData] = useState({ playerIndex: null, roundIndex: null });
      const [modalBidInput, setModalBidInput] = useState('');
      const [modalValidationError, setModalValidationError] = useState('');
      const [validationError, setValidationError] = useState('');
      const [loading, setLoading] = useState(true);
      const [showStartPopup, setShowStartPopup] = useState(false);

      const totalTricksInGame = playerCount === 3 ? 16 : 13;

      // Functie om de spelstaat op te slaan in localStorage
      const saveGameState = () => {
        const gameState = {
          playerNames,
          isGameStarted,
          gameMode,
          playerCount,
          minBid,
          maxBid,
          hasBonusTricks,
          bids,
          tricks,
          scores,
          numRounds,
        };
        localStorage.setItem('batakGameState', JSON.stringify(gameState));
      };

      // Functie om de spelstaat te laden uit localStorage
      const loadGameState = () => {
        const savedState = localStorage.getItem('batakGameState');
        if (savedState) {
          const gameState = JSON.parse(savedState);
          setPlayerNames(gameState.playerNames);
          setIsGameStarted(gameState.isGameStarted);
          setGameMode(gameState.gameMode);
          setPlayerCount(gameState.playerCount);
          setMinBid(gameState.minBid);
          setMaxBid(gameState.maxBid);
          setHasBonusTricks(gameState.hasBonusTricks);
          setBids(gameState.bids);
          setTricks(gameState.tricks);
          setScores(gameState.scores);
          setNumRounds(gameState.numRounds);
        }
      };

      // Effect voor het laden van opgeslagen gegevens bij het opstarten
      useEffect(() => {
        const savedState = localStorage.getItem('batakGameState');
        if (savedState) {
          setShowStartPopup(true);
        } else {
          setLoading(false);
        }
      }, []);

      // Effect voor het opslaan van gegevens bij elke wijziging in de spelstaat
      useEffect(() => {
        if (!loading) {
          saveGameState();
        }
      }, [playerNames, isGameStarted, gameMode, playerCount, minBid, maxBid, hasBonusTricks, bids, tricks, scores, numRounds]);

      // Effect om te scrollen naar het scorebord wanneer het spel start
      useEffect(() => {
        if (isGameStarted) {
          const scoreboard = document.getElementById('score-container');
          if (scoreboard) {
            scoreboard.scrollIntoView({ behavior: 'smooth' });
          }
        }
      }, [isGameStarted]);

      // Pop-up doorgaan of reset functies
      const handleContinueGame = () => {
        loadGameState();
        setShowStartPopup(false);
        setLoading(false);
      };

      const handleResetFromPopup = () => {
        handleResetGame();
        setShowStartPopup(false);
        setLoading(false);
      };

      // Functie om de spelmodus te wijzigen
      const handleGameModeChange = (e) => {
        const newGameMode = e.target.value;
        setGameMode(newGameMode);
        if (newGameMode === 'teams') {
          setPlayerCount(4);
        } else {
          setPlayerCount(4);
        }
      };
      
      const handlePlayerCountChange = (e) => {
        setPlayerCount(parseInt(e.target.value, 10));
      };
      
      const handlePlayerNameChange = (index, value) => {
        const newNames = [...playerNames];
        newNames[index] = value;
        setPlayerNames(newNames);
      };
      
      const handleStartGame = () => {
        const filteredNames = playerNames.filter(name => name.trim() !== '');
        if (filteredNames.length !== playerCount) {
          setPlayerCountError(true);
          return;
        }
        setPlayerCountError(false);
        setIsGameStarted(true);
        setNumRounds(1);
        setBids(filteredNames.map(() => Array(1).fill(null)));
        setTricks(filteredNames.map(() => Array(1).fill(null)));
        setScores(filteredNames.map(() => Array(1).fill(null)));
      };
      
      const handleUpdateGame = () => {
        const filteredNames = playerNames.filter(name => name.trim() !== '');
        if (filteredNames.length !== playerCount) {
          setPlayerCountError(true);
          return;
        }
        setPlayerCountError(false);
        setPlayerNames(filteredNames);
      };
      
      const handleResetGame = () => {
        setPlayerNames(['', '', '', '']);
        setIsGameStarted(false);
        setGameMode('solo');
        setPlayerCount(4);
        setMinBid(6);
        setMaxBid(13);
        setHasBonusTricks(false);
        setBids([]);
        setTricks([]);
        setScores([]);
        setNumRounds(0);
        localStorage.removeItem('batakGameState');
      };
      
      const handleAddRound = () => {
        const currentRoundIndex = numRounds - 1;
        const isRoundComplete = scores.every(playerScores => playerScores[currentRoundIndex] !== null);
        if (!isRoundComplete) {
          setValidationError("Fout: Bereken eerst de score van de huidige ronde.");
          return;
        }
        
        setNumRounds(numRounds + 1);
        setBids(prevBids => prevBids.map(playerBids => [...playerBids, null]));
        setTricks(prevTricks => prevTricks.map(playerTricks => [...playerTricks, null]));
        setScores(prevScores => prevScores.map(playerScores => [...playerScores, null]));
        setValidationError('');
      };
      
      const showBidModalHandler = (playerIndex, roundIndex) => {
        setModalData({ playerIndex, roundIndex });
        setModalBidInput('');
        setModalValidationError('');
        setShowBidModal(true);
      };
      
      const closeBidModalHandler = () => {
        setShowBidModal(false);
      };

      const handleModalKeyboardInput = (value) => {
        let currentInput = modalBidInput;
        if (value === 'clear') {
          setModalBidInput('');
        } else {
          if (currentInput.length < 2) {
            setModalBidInput(currentInput + value);
          }
        }
      };

      const submitBidHandler = () => {
        const bid = parseInt(modalBidInput, 10);
        if (isNaN(bid) || bid < minBid || bid > maxBid) {
          setModalValidationError(`Fout: Het bod moet tussen ${minBid} en ${maxBid} liggen.`);
          return;
        }
        
        const { playerIndex, roundIndex } = modalData;
        const newBids = [...bids];
        newBids[playerIndex][roundIndex] = bid;
        setBids(newBids);
        closeBidModalHandler();
        setValidationError(`Bod van ${playerNames[playerIndex]} is vastgelegd.`);
      };

      const handleTricksInput = (e, playerIndex, roundIndex) => {
          const value = e.target.value;
          const newTricks = [...tricks];
          newTricks[playerIndex][roundIndex] = value === '' ? null : parseInt(value, 10);
          setTricks(newTricks);
      };

      const handleCalculateScore = (biddingPlayerIndex, roundIndex) => {
        // Collect tricks from all players, treating null as 0
        const currentRoundTricks = playerNames.map((_, playerIndex) => {
            const trickCount = tricks[playerIndex][roundIndex];
            return trickCount !== null ? trickCount : 0;
        });

        const totalTricksInRound = currentRoundTricks.reduce((sum, val) => sum + val, 0);

        if (totalTricksInRound !== totalTricksInGame) {
          setValidationError(`Fout: Het totaal aantal slagen moet ${totalTricksInGame} zijn. Huidig totaal: ${totalTricksInRound}`);
          return;
        }
        
        const newScores = [...scores];
        playerNames.forEach((_, playerIndex) => {
          const bid = bids[playerIndex][roundIndex];
          const trickCount = currentRoundTricks[playerIndex];
          if (playerIndex === biddingPlayerIndex) {
            // Bereken de score van de biedende speler
            if (trickCount >= bid) {
              newScores[playerIndex][roundIndex] = hasBonusTricks ? bid : trickCount;
            } else {
              newScores[playerIndex][roundIndex] = -bid;
            }
          } else {
            // De score van andere spelers is gelijk aan hun aantal slagen
            newScores[playerIndex][roundIndex] = trickCount;
          }
        });
        setScores(newScores);
        setValidationError(`Ronde ${roundIndex + 1} is vastgelegd!`);
      };

      // Bereken de totale scores voor de voettekst
      const totalScores = playerNames.map((_, pIndex) =>
        scores[pIndex] ? scores[pIndex].reduce((sum, score) => sum + (score || 0), 0) : 0
      );

      const biddingPlayerIndexInRound = bids.findIndex(playerBids => playerBids[numRounds - 1] !== null);
      const isRoundLocked = scores.some(playerScores => playerScores[numRounds - 1] !== null);

      return (
        <>
          {showStartPopup && <GameSessionPopup onContinue={handleContinueGame} onReset={handleResetFromPopup} />}
          <div id="main-content" className="w-full flex flex-col items-center min-h-screen p-2">
            {/* Header en beschrijving */}
            <div className="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
              <div className="flex justify-between items-center">
                <a href="./index.html" className="bg-gray-200 text-gray-700 font-bold py-1 px-2 rounded-lg text-xs hover:bg-gray-300">
                  ← Terug naar menu
                </a>
                <h1 className="text-2xl sm:text-4xl font-bold text-center text-gray-800 mb-1 flex-grow">Schoppenjagen (Batak) Calculator</h1>
                <div className="w-20"></div> {/* Placeholder om de titel te centreren */}
              </div>
              <p className="text-center text-gray-600 text-sm sm:text-base mb-2">
                Houd de score bij voor de Solo of Team Batak-variant.
              </p>
            </div>

            {/* Spelinstellingen */}
            <div className="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
              <h2 className="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Spelinstellingen</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Spelmodus:</label>
                    <select id="game-mode-select" className="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value={gameMode} onChange={handleGameModeChange} disabled={isGameStarted}>
                      <option value="solo">Solo Batak</option>
                      <option value="teams">Team Batak</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Aantal spelers:</label>
                    <select id="player-count-select" className="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value={playerCount} onChange={handlePlayerCountChange} disabled={isGameStarted || gameMode === 'teams'}>
                      <option value="4">4 spelers</option>
                      <option value="3">3 spelers</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Minimale bod:</label>
                    <input type="number" id="min-bid-input" className="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value={minBid} onChange={(e) => setMinBid(parseInt(e.target.value, 10))} disabled={isGameStarted} />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Maximale bod:</label>
                    <input type="number" id="max-bid-input" className="block w-full mt-1 px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" value={maxBid} onChange={(e) => setMaxBid(parseInt(e.target.value, 10))} disabled={isGameStarted} />
                  </div>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                {Array.from({ length: playerCount }).map((_, index) => (
                  <div key={index} className="player-card bg-gray-50 p-4 rounded-lg border border-gray-200 shadow-sm">
                    <label className="block text-sm font-medium text-gray-700 mb-2">Speler {index + 1}:</label>
                    <input type="text" id={`player-name-${index + 1}`} className="block w-full px-3 py-1.5 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm" placeholder={`Speler ${index + 1}`} value={playerNames[index] || ''} onChange={(e) => handlePlayerNameChange(index, e.target.value)} disabled={isGameStarted} />
                  </div>
                ))}
              </div>

              <div className="flex items-center space-x-2 p-3 bg-blue-50 rounded-lg border border-blue-200">
                <input id="bonus-tricks-checkbox" type="checkbox" className="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked={hasBonusTricks} onChange={(e) => setHasBonusTricks(e.target.checked)} disabled={isGameStarted} />
                <div>
                  <label htmlFor="bonus-tricks-checkbox" className="block text-sm font-bold text-blue-700">Slagpunten bij overbieden gelijk houden</label>
                  <p className="text-xs text-blue-500 mt-1">
                    <span className="font-bold">Aangevinkt:</span> Als je 8 biedt en 9 slagen pakt, is je score +8.<br />
                    <span className="font-bold">Niet aangevinkt:</span> Als je 8 biedt en 9 slagen pakt, is je score +9.
                  </p>
                </div>
              </div>

              {playerCountError && (
                <div id="player-count-error" className="mt-4 p-3 bg-red-100 text-red-700 font-bold rounded-lg">Vul de namen in van alle {playerCount} spelers om te beginnen.</div>
              )}
              <div className="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-4">
                {!isGameStarted ? (
                  <button id="start-game-btn" onClick={handleStartGame} className="w-full py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Start Spel</button>
                ) : (
                  <>
                    <button id="update-game-btn" onClick={handleUpdateGame} className="w-full sm:w-1/2 py-2.5 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Instellingen toepassen</button>
                    <button id="reset-game-btn" onClick={handleResetGame} className="w-full sm:w-1/2 py-2.5 px-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Reset Spel</button>
                  </>
                )}
              </div>
            </div>

            {/* Scorebord */}
            {isGameStarted && (
            <div id="score-container" className="bg-white p-4 rounded-2xl shadow-xl w-full max-w-full lg:max-w-5xl mb-4">
              <h2 className="text-xl sm:text-2xl font-bold text-gray-800 mb-3">Scorebord</h2>
              {validationError && (
                <div id="validation-message-box" className={`mt-2 p-3 font-bold rounded-lg ${validationError.startsWith('Fout') ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>{validationError}</div>
              )}
              <div className="overflow-x-auto">
                <table id="score-table" className="w-full text-left rounded-2xl shadow-md overflow-hidden">
                  <thead>
                    <tr>
                      <th className="rounded-tl-2xl">Ronde</th>
                      {playerNames.map((name, index) => (
                        <th key={index} className={`text-sm ${index === playerNames.length - 1 ? 'rounded-tr-2xl' : ''}`}>
                          {name}
                        </th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {Array.from({ length: numRounds }).map((_, roundIndex) => {
                      const dealerIndex = roundIndex % playerCount;
                      const biddingPlayerIndexInRound = bids.findIndex(playerBids => playerBids[roundIndex] !== null);
                      const isTricksPhase = biddingPlayerIndexInRound !== -1 && scores.every(playerScores => playerScores[roundIndex] === null);

                      return (
                        <tr key={roundIndex}>
                          <td className="font-bold text-sm">
                            <div className="round-dealer-content">
                              <span>Ronde {roundIndex + 1}</span>
                              <span className="text-xs font-normal text-gray-500 mt-1">Dealer: {playerNames[dealerIndex]}</span>
                            </div>
                          </td>
                          {playerNames.map((_, playerIndex) => {
                            const bid = bids[playerIndex] && bids[playerIndex][roundIndex];
                            const trickCount = tricks[playerIndex] && tricks[playerIndex][roundIndex];
                            const score = scores[playerIndex] && scores[playerIndex][roundIndex];
                            const isBiddingPhase = bids.every(playerBids => playerBids[roundIndex] === null);
                            
                            return (
                              <td key={playerIndex}>
                                <div className="action-container">
                                  {isBiddingPhase && (
                                    <button onClick={() => showBidModalHandler(playerIndex, roundIndex)} className="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bied</button>
                                  )}
                                  {isTricksPhase && (
                                    <>
                                      {playerIndex === biddingPlayerIndexInRound ? (
                                        <div className="text-sm font-bold text-gray-700">Bod: {bid}</div>
                                      ) : null}
                                      
                                      <div className="input-container">
                                        <input type="number" className="block px-1.5 py-0.5 rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-xs tricks-input w-24" placeholder="Slagen" min="0" max={totalTricksInGame} value={trickCount || ''} onChange={(e) => handleTricksInput(e, playerIndex, roundIndex)} />
                                      </div>
                                      {biddingPlayerIndexInRound === playerIndex && (
                                          <button onClick={() => handleCalculateScore(playerIndex, roundIndex)} className="py-1 px-2 bg-blue-500 text-white text-xs font-bold rounded-lg shadow hover:bg-blue-600">Bereken Score</button>
                                      )}
                                    </>
                                  )}
                                  {!isBiddingPhase && !isTricksPhase && (
                                    <>
                                      <div className="text-sm font-bold text-gray-700">
                                        {bid !== null ? `Bod: ${bid}, Slagen: ${trickCount}` : `Slagen: ${trickCount}`}
                                      </div>
                                      <div className={`text-lg font-bold ${score > 0 ? 'score-win' : score < 0 ? 'score-lose' : 'score-zero'}`}>
                                        {score > 0 ? `+${score}` : score}
                                      </div>
                                    </>
                                  )}
                                </div>
                              </td>
                            );
                          })}
                        </tr>
                      );
                    })}
                  </tbody>
                  <tfoot>
                    <tr>
                      <td className="font-bold text-sm bg-gray-900 text-white rounded-bl-2xl">Totaal</td>
                      {totalScores.map((total, index) => {
                        const scoreClass = total > 0 ? 'score-win' : total < 0 ? 'score-lose' : 'score-zero';
                        return (
                          <td key={index} className={`text-lg font-bold text-center ${scoreClass} ${index === playerNames.length - 1 ? 'rounded-br-2xl' : ''}`}>
                            {total}
                          </td>
                        );
                      })}
                    </tr>
                  </tfoot>
                </table>
              </div>
              <button id="add-round-btn" onClick={handleAddRound} className="mt-4 w-full py-2.5 px-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md transition-colors text-sm">Ronde toevoegen</button>
            </div>
            )}
          </div>
          
          {/* Aangepaste bied-popup */}
          {showBidModal && (
            <div id="bid-modal" className="modal-overlay">
              <div className="modal-content">
                  <h3 className="text-xl font-bold text-gray-800 mb-2">Bieding invoeren</h3>
                  <p className="text-sm text-gray-600 mb-4">
                      Voer het bod in voor <span id="modal-player-name" className="font-bold text-gray-800">{playerNames[modalData.playerIndex]}</span> voor ronde <span id="modal-round-number" className="font-bold text-gray-800">{modalData.roundIndex + 1}</span>.
                  </p>
                  <div className="mb-4">
                      <label htmlFor="modal-bid-input" className="block text-sm font-medium text-gray-700 mb-1">Bod ({minBid}-{maxBid}):</label>
                      <input type="text" id="modal-bid-input" className="w-full px-3 py-2 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm" min={minBid} max={maxBid} placeholder={`Bijv. ${Math.floor((minBid + maxBid) / 2)}`} readOnly value={modalBidInput} />
                  </div>
                  <div className="grid grid-cols-3 gap-2">
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('1')}>1</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('2')}>2</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('3')}>3</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('4')}>4</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('5')}>5</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('6')}>6</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('7')}>7</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('8')}>8</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('9')}>9</button>
                      <button className="col-span-1 bg-red-600 text-white font-bold rounded-lg p-4 text-2xl hover:bg-red-700" onClick={() => handleModalKeyboardInput('clear')}>C</button>
                      <button className="bg-gray-200 text-gray-800 font-bold rounded-lg p-4 text-2xl hover:bg-gray-300" onClick={() => handleModalKeyboardInput('0')}>0</button>
                      <button id="modal-submit-btn" className="col-span-1 bg-green-600 text-white font-bold rounded-lg p-4 text-2xl hover:bg-green-700" onClick={submitBidHandler}>✓</button>
                  </div>
                  {modalValidationError && (
                    <div id="modal-validation-message" className="mt-2 p-2 bg-red-100 text-red-700 font-bold rounded-lg text-sm">{modalValidationError}</div>
                  )}
                  <div className="flex justify-end space-x-2 mt-4">
                      <button id="modal-cancel-btn" className="px-4 py-2 bg-gray-200 text-gray-700 font-bold rounded-lg shadow-sm hover:bg-gray-300 transition-colors text-sm" onClick={closeBidModalHandler}>Annuleren</button>
                  </div>
              </div>
            </div>
          )}
          
          {/* Popup component for a saved game session */}
          <GameSessionPopup onContinue={handleContinueGame} onReset={handleResetFromPopup} show={showStartPopup} />

          <footer className="w-full text-center py-4 text-gray-400 text-sm">Made by AE</footer>
        </>
      );
    }
    
    // Popup component for a saved game session
    const GameSessionPopup = ({ onContinue, onReset, show }) => {
        if (!show) return null;
        return (
            <div className="modal-overlay">
                <div className="modal-content">
                    <h3 className="text-xl font-bold mb-4">Opgeslagen spel gevonden!</h3>
                    <p className="mb-6">Er staat nog een spel open in je browser. Wil je doorgaan waar je gebleven was, of een nieuw spel starten?</p>
                    <div className="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 justify-center">
                        <button
                            onClick={onContinue}
                            className="w-full sm:w-auto py-2 px-6 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-colors"
                        >
                            Doorgaan
                        </button>
                        <button
                            onClick={onReset}
                            className="w-full sm:w-auto py-2 px-6 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg shadow-md transition-colors"
                        >
                            Reset huidige spel
                        </button>
                    </div>
                </div>
            </div>
        );
    };

    // Render the App component into the root element
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
